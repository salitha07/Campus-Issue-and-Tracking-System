<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
    <!-- Language switcher with standard globe icon - uses JS to avoid #httpServletRequest null in fragments -->
    <div th:fragment="language-switcher" class="lang-switcher">
        <div class="lang-switcher-btn" th:title="#{lang.change}" tabindex="0" role="button" aria-label="#{lang.change}">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16" aria-hidden="true">
                <path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm7.5-6.923c-.67.204-1.335.82-1.887 1.855A7.97 7.97 0 0 0 5.145 4H7.5V1.077zM4.09 4a9.267 9.267 0 0 1 .64-1.539 6.7 6.7 0 0 1 .597-.933A7.025 7.025 0 0 0 2.255 4H4.09zm-.582 3.5c.03-.877.138-1.718.312-2.5H1.674a6.958 6.958 0 0 0-.656 2.5h2.49zM4.847 5a12.5 12.5 0 0 0-.338 2.5H7.5V5H4.847zM8.5 5v2.5h2.99a12.495 12.495 0 0 0-.337-2.5H8.5zM4.51 8.5a12.5 12.5 0 0 0 .337 2.5H7.5V8.5H4.51zm3.99 0V11h2.653c.187-.765.306-1.608.338-2.5H8.5zM5.145 12c.138.386.295.744.468 1.068.552 1.035 1.218 1.65 1.887 1.855V12H5.145zm.182 2.472a6.696 6.696 0 0 1-.597-.933A9.268 9.268 0 0 1 4.09 12H2.255a7.024 7.024 0 0 0 3.072 2.472zM3.82 11a13.652 13.652 0 0 1-.312-2.5H1.018a6.96 6.96 0 0 0 .656 2.5H3.82zm6.853 3.472A7.024 7.024 0 0 0 13.745 12H11.91a9.27 9.27 0 0 1 .64 1.539 6.688 6.688 0 0 1-.597.933zM8.5 12v2.923c.67-.204 1.335-.82 1.887-1.855.173-.324.33-.682.468-1.068H8.5zm3.68-1h2.146a6.958 6.958 0 0 0 .656-2.5H12.18a13.65 13.65 0 0 1 .312 2.5zm.357 2.5H9.827a12.495 12.495 0 0 0 .338-2.5H12.5V11h-.463zm.938-3.5a12.5 12.5 0 0 0-.337-2.5H12.5V8.5h.463zM11.5 5v2.5h2.153a12.495 12.495 0 0 0-.338-2.5H11.5z"/>
            </svg>
        </div>
        <div class="lang-switcher-menu">
            <a href="#" role="button" th:text="#{lang.english}" onclick="var p=(window.location.pathname||'/'); if(p==='')p='/'; window.location=p+(p.indexOf('?')>=0?'&':'?')+'lang=en'; return false;">English</a>
            <a href="#" role="button" th:text="#{lang.sinhala}" onclick="var p=(window.location.pathname||'/'); if(p==='')p='/'; window.location=p+(p.indexOf('?')>=0?'&':'?')+'lang=si'; return false;">Sinhala</a>
            <a href="#" role="button" th:text="#{lang.tamil}" onclick="var p=(window.location.pathname||'/'); if(p==='')p='/'; window.location=p+(p.indexOf('?')>=0?'&':'?')+'lang=ta'; return false;">Tamil</a>
        </div>
    </div>
</body>
</html>
